<!DOCTYPE html>
<html lang="zxx">
<head>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<title>Admin</title>
<link rel="icon" href="<?= base_url()?>img/logo.png" type="image/png">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="<?= base_url()?>admin/css/bootstrap1.min.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/themefy_icon/themify-icons.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/niceselect/css/nice-select.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/owl_carousel/css/owl.carousel.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/gijgo/gijgo.min.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/font_awesome/css/all.min.css" />
<link rel="stylesheet" href="<?= base_url()?>admin/vendors/tagsinput/tagsinput.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/datepicker/date-picker.css" />
<link rel="stylesheet" href="<?= base_url()?>admin/vendors/vectormap-home/vectormap-2.0.2.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/scroll/scrollable.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/datatable/css/jquery.dataTables.min.css" />
<link rel="stylesheet" href="<?= base_url()?>admin/vendors/datatable/css/responsive.dataTables.min.css" />
<link rel="stylesheet" href="<?= base_url()?>admin/vendors/datatable/css/buttons.dataTables.min.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/text_editor/summernote-bs4.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/morris/morris.css">

<link rel="stylesheet" href="<?= base_url()?>admin/vendors/material_icon/material-icons.css" />

<link rel="stylesheet" href="<?= base_url()?>admin/css/metisMenu.css">

<link rel="stylesheet" href="<?= base_url()?>admin/css/style1.css" />
<link rel="stylesheet" href="<?= base_url()?>admin/css/colors/default.css" id="colorSkinCSS">
</head>
<body class="crm_body_bg">


<nav class="sidebar dark_sidebar  ">
<div class="logo d-flex justify-content-between">
<a class="large_logo" href="/"><img src="<?= base_url()?>img/logo.png" alt></a>
<a class="small_logo" href="/"><img src="<?= base_url()?>img/mini_logo.png" alt></a>
<div class="sidebar_close_icon d-lg-none">
<i class="ti-close"></i>
</div>
</div>
<ul id="sidebar_menu">





</ul>
</nav>

<section class="main_content dashboard_part large_header_bg">

<div class="container-fluid g-0">
<div class="row">
<div class="col-lg-12 p-0 ">
<div class="header_iner d-flex justify-content-between align-items-center">
<div class="sidebar_icon d-lg-none">
<i class="ti-menu"></i>
</div>
<label class="form-label switch_toggle d-none d-lg-block" for="checkbox">
<input type="checkbox" id="checkbox">
<div class="slider round open_miniSide"></div>
</label>
<div class="header_right d-flex justify-content-between align-items-center">
<div class="header_notification_warp d-flex align-items-center">
<li>
<div class="serach_button">
<i class="ti-search"></i>
<div class="serach_field-area d-flex align-items-center">
<div class="search_inner">
<form action="#">
<div class="search_field">
<input type="text" placeholder="Search here...">
</div>
<button class="close_search"> <i class="ti-search"></i> </button>
</form>
</div>
<span class="f_s_14 f_w_400 ml_25 white_text text_white">Apps</span>
</div>
</div>
</li>
<li>
<a class="bell_notification_clicker" href="#"> <img src="<?= base_url()?>admin/img/icon/bell.svg" alt>
<span>2</span>
</a>



</li>
<li>
<a class="CHATBOX_open" href="#"> <img src="<?= base_url()?>admin/img/icon/msg.svg" alt> <span>2</span> </a>
</li>
</div>
<div class="profile_info">
<img src="<?= base_url()?>admin/img/me.jpg" alt="#">
<div class="profile_info_iner">
<div class="profile_author_name">
<p>Owner</p>
<h5>Mary Mae</h5>
</div>
<div class="profile_info_details">
<a href="#">My Profile </a>
<a href="#">Settings</a>
<a href="/">Log Out </a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="main_content_iner overly_inner ">
<div class="container-fluid p-0 ">

<div class="row">
<div class="col-12">
<div class="page_title_box d-flex flex-wrap align-items-center justify-content-between">
<div class="page_title_left">
<h3 class="f_s_25 f_w_700 dark_text">Dashboard</h3>
<ol class="breadcrumb page_bradcam mb-0">
<li class="breadcrumb-item"><a href="javascript:void(0);">Home</a></li>
<li class="breadcrumb-item active">Dark</li>
</ol>
</div>
<div class="page_title_right">
<div class="page_date_button">
August 1, 2020 - August 31, 2020
</div>
<div class="dropdown common_bootstrap_button ">
<span class="dropdown-toggle" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
action
</span>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
<a class="dropdown-item f_s_16 f_w_600" href="#"> Download</a>
<a class="dropdown-item f_s_16 f_w_600" href="#"> Print</a>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="back-top" style="display: none;">
<a title="Go to Top" href="#">
<i class="ti-angle-up"></i>
</a>
</div>
<div class="main_content_iner ">
<div class="container-fluid p-0">
<div class="row justify-content-center">
<div class="col-lg-12">
<div class="white_card card_height_100 mb_30">
<div class="white_card_header">
<div class="box_header m-0">
<div class="main-title">
<h3 class="m-0">Data table</h3>
</div>
</div>
</div>
<div class="white_card_body">
<div class="QA_section">
<div class="white_box_tittle list_header">
<h4>Table</h4>
<div class="box_right d-flex lms_block">
<div class="serach_field_2">
<div class="search_inner">
<form Active="#">
<div class="search_field">
<input type="text" placeholder="Search content here...">
</div>
<button type="submit"> <i class="ti-search"></i> </button>
</form>
</div>
</div>
<!-- Add New Button -->

<div class="add_button ms-2">
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addProductModal" autofocus>Add Product</button>

</div>
<!-- Add Product Modal -->
<div class="modal fade" id="addProductModal" role="dialog" aria-labelledby="addProductModalLabel" aria-hidden="true" >
    <br>
  <div class="modal-dialog modal-dialog-centered"style="z-index: 10000;">
  
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addProductModalLabel">Add New Product</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      <form action="/product" method="post">
          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" name="name" id="name" class="form-control">
          </div>

          <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea name="description" id="description" class="form-control"></textarea>
          </div>

          <div class="mb-3">
            <label for="price" class="form-label">Price</label>
            <input type="number" name="price" id="price" class="form-control">
          </div>

          <div class="mb-3">
            <label for="image" class="form-label">Image</label>
            <input type="file" name="image" id="image" class="form-control">
          </div>
          <div class="mb-3">
            <label for="category" class="form-label">Category</label>
            <input type="text" name="category" id="category" class="form-control">
          </div>
          <div class="mb-3">
            <label for="quantity" class="form-label">Quantity</label>
            <input type="number" name="quantity" id="quantity" class="form-control">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </form>
      </div>
    </div>
    
  </div>
</div>

<!-- edit_product_modal.php -->

<div class="modal fade" id="editProductModal" tabindex="-1" aria-labelledby="editProductModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editProductModalLabel">Edit Product</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="/products/update" method="post">
                    <input type="hidden" name="product_id" id="editProductId">
                    <div class="mb-3">
                        <label for="editName" class="form-label">Name</label>
                        <input type="text" name="name" id="editName" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label for="editDesc" class="form-label">Description</label>
                        <input type="text" name="description" id="editDesc" class="form-control">
                    </div> <div class="mb-3">
                        <label for="editPrice" class="form-label">Price</label>
                        <input type="number" name="price" id="editPrice" class="form-control">
                    </div> <div class="mb-3">
                        <label for="editImage" class="form-label">Image</label>
                        <input type="file" name="image" id="editImage" class="form-control">
                    </div> <div class="mb-3">
                        <label for="editCat" class="form-label">Category</label>
                        <input type="text" name="category" id="editCat" class="form-control">
                    </div> <div class="mb-3">
                        <label for="editQuan" class="form-label">Quantity</label>
                        <input type="number" name="quantity" id="editQuan" class="form-control">
                    </div>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </form>
            </div>
        </div>
    </div>
</div>

</div>
</div>
<div class="QA_table mb_30">
    <table class="table lms_table_active">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Description</th>
                <th scope="col">Image</th>
                <th scope="col">Price</th>
                <th scope="col">Category</th>
                <th scope="col">Quantity</th>
                <th scope="col">Action</th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($products as $product): ?>
                <tr>
                    <td><?= $product['name']; ?></td>
                    <td><?= $product['description']; ?></td>
                    <td><?= $product['image']; ?></td>
                    <td><?= $product['price']; ?></td>
                    <td><?= $product['category']; ?></td>
                    <td><?= $product['quantity']; ?></td>
                    <td>
                    <button type="button" class="btn btn-primary" onclick="openEditModal(
                        <?= $product['id']; ?>,
                        '<?= $product['name']; ?>',
                        '<?= $product['description']; ?>',
                        <?= $product['price']; ?>,
                        '<?= $product['category']; ?>',
                        <?= $product['quantity']; ?>
                    )">Edit</button>

<button type="button" class="btn btn-danger" onclick="deleteProduct(<?= $product['id']; ?>)">Delete</button>
                    </td>
                </tr>
            <?php endforeach; ?>
        </tbody>
    </table>
</div>
</div>
</div>
</div>
</div>
<div class="col-12">
</div>
</div>
</div>
</div>


<script>
    // Function to open the edit modal and populate it with product data
    function openEditModal(productId, name, description, price, category, quantity) {
        // Set the product ID and name in the modal
        document.getElementById('editProductId').value = productId;
        document.getElementById('editName').value = name;

        // Set other fields in the modal
        document.getElementById('editDesc').value = description;
        document.getElementById('editPrice').value = price;
        document.getElementById('editCat').value = category;
        document.getElementById('editQuan').value = quantity;

        // Open the modal
        $('#editProductModal').modal('show');
    }

    // Function to delete a product
    function deleteProduct(productId) {
        // Confirm with the user before proceeding
        if (confirm("Are you sure you want to delete this product?")) {
            // Send an AJAX request to delete the product
            $.ajax({
                type: 'POST',
                url: '/admins/delete/' + productId, // Update the URL as needed
                success: function (response) {
                    // Reload the page or update the table as needed
                    window.location.reload(); // Reload the page for simplicity
                },
                error: function (error) {
                    console.error('Error:', error);
                    // Handle errors if needed
                }
            });
        }
    }
</script>

<script>
$(document).ready(function() {
  $('#addProductModal').on('show.bs.modal', function() {
   
    $('#name').val('');
    $('#description').val('');
    $('#price').val('');
    $('#image').val('');
    $('#price').val('');
    $('#category').val('');
    $('#quantity').val('');
  });
});
</script>
<script src="<?= base_url()?>admin/js/jquery1-3.4.1.min.js"></script>

<script src="<?= base_url()?>admin/js/popper1.min.js"></script>

<script src="<?= base_url()?>admin/js/bootstrap1.min.js"></script>

<script src="<?= base_url()?>admin/js/metisMenu.js"></script>

<script src="<?= base_url()?>admin/vendors/count_up/jquery.waypoints.min.js"></script>

<script src="<?= base_url()?>admin/vendors/chartlist/Chart.min.js"></script>

<script src="<?= base_url()?>admin/vendors/count_up/jquery.counterup.min.js"></script>

<script src="<?= base_url()?>admin/vendors/niceselect/js/jquery.nice-select.min.js"></script>

<script src="<?= base_url()?>admin/vendors/owl_carousel/js/owl.carousel.min.js"></script>

<script src="<?= base_url()?>admin/vendors/datatable/js/jquery.dataTables.min.js"></script>
<script src="<?= base_url()?>admin/vendors/datatable/js/dataTables.responsive.min.js"></script>
<script src="<?= base_url()?>admin/vendors/datatable/js/dataTables.buttons.min.js"></script>
<script src="<?= base_url()?>admin/vendors/datatable/js/buttons.flash.min.js"></script>
<script src="<?= base_url()?>admin/vendors/datatable/js/jszip.min.js"></script>
<script src="<?= base_url()?>admin/vendors/datatable/js/pdfmake.min.js"></script>
<script src="<?= base_url()?>admin/vendors/datatable/js/vfs_fonts.js"></script>
<script src="<?= base_url()?>admin/vendors/datatable/js/buttons.html5.min.js"></script>
<script src="<?= base_url()?>admin/vendors/datatable/js/buttons.print.min.js"></script>

<script src="<?= base_url()?>admin/vendors/datepicker/datepicker.js"></script>
<script src="<?= base_url()?>admin/vendors/datepicker/datepicker.en.js"></script>
<script src="<?= base_url()?>admin/vendors/datepicker/datepicker.custom.js"></script>
<script src="<?= base_url()?>admin/js/chart.min.js"></script>
<script src="<?= base_url()?>admin/vendors/chartjs/roundedBar.min.js"></script>

<script src="<?= base_url()?>admin/vendors/progressbar/jquery.barfiller.js"></script>

<script src="<?= base_url()?>admin/vendors/tagsinput/tagsinput.js"></script>

<script src="<?= base_url()?>admin/vendors/text_editor/summernote-bs4.js"></script>
<script src="<?= base_url()?>admin/vendors/am_chart/amcharts.js"></script>

<script src="<?= base_url()?>admin/vendors/scroll/perfect-scrollbar.min.js"></script>
<script src="<?= base_url()?>admin/vendors/scroll/scrollable-custom.js"></script>

<script src="<?= base_url()?>admin/vendors/vectormap-home/vectormap-2.0.2.min.js"></script>
<script src="<?= base_url()?>admin/vendors/vectormap-home/vectormap-world-mill-en.js"></script>

<script src="<?= base_url()?>admin/vendors/apex_chart/apex-chart2.js"></script>
<script src="<?= base_url()?>admin/vendors/apex_chart/apex_dashboard.js"></script>
<script src="<?= base_url()?>admin/vendors/echart/echarts.min.js"></script>
<script src="<?= base_url()?>admin/vendors/chart_am/core.js"></script>
<script src="<?= base_url()?>admin/vendors/chart_am/charts.js"></script>
<script src="<?= base_url()?>admin/vendors/chart_am/animated.js"></script>
<script src="<?= base_url()?>admin/vendors/chart_am/kelly.js"></script>
<script src="<?= base_url()?>admin/vendors/chart_am/chart-custom.js"></script>

<script src="<?= base_url()?>admin/js/dashboard_init.js"></script>
<script src="<?= base_url()?>admin/js/custom.js"></script>
</body>
</html>
